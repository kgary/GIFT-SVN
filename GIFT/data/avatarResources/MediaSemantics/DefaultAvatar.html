<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN">
<!--
This file has been automatically generated by the Character Builder.
You can also cut and paste from this file into your own web page. DO NOT MODIFY
THIS FILE, as your changes may be overwritten the next time you Render to HTML5.
-->
<html>
	<head>
		<script type="text/javascript">
			window.addEventListener("message", receiveMessage, false);
 
			function receiveMessage(event)
			{
				try{
					var payload = JSON.parse(event.data);
				
					if (payload.method == "msSpeak") {
					
						msSpeak("Movie1",payload.key);
						
					} else if (payload.method == "msPlay") {
					
						msPlay("Movie1",payload.key);
					}
				} catch (error) {}
			}
			
			// used to detect when the avatar is idle in order to notify GIFT
			function onPresentingChange(id, p)
			{
				//development/debugging purposes:
				console.log('presentingChange: id = ' + id + ' p = ' + p);
				
				// Presenting state changed, e.g. as a result of going idle
				// MH: had to check for 'Movie1' used elsewhere in this header as false positives
				//     for detecting idle would be received if all we did was check for 'p == false'
				//     (e.g. "presentingChange: id = Movie1 p = false", "presentingChange: id = [object Object] p = false"
				// MH 10.19.17: removing '&& id != "Movie1"' allowed idle notifications to work. #3287  I think this
				//      is because we are no longer recreating the ChatWidget.java class and now using update chat logic for each
				//      new conversation entry.
				if (p == false /**&& id != "Movie1"*/) {
				
					//alert("Character idle");
					try {
						parent.notifyGIFT();
					} catch (error) {
						// workaround for cross-domain error
						parent.postMessage("notify", "*");
					}
				}
			}
		</script>
	</head>
	<body>
		<script src="jquery.min.js" type="text/javascript"></script>
		<script src="MSHTML5.min.js" type="text/javascript"></script>
		<script type="text/javascript">
		msEmbed('Movie1','DefaultAvatar','DefaultAvatar_Files',250,200);
		</script>
		<p/>
	</body>
</html>
